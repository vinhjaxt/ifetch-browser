!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):r.ifetch=e()}(this,function(){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e="%[a-f0-9]{2}",o=new RegExp(e,"gi"),c=new RegExp("("+e+")+","gi");function u(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(o),n=1;n<t.length;n++)t=(e=function r(e,t){try{return decodeURIComponent(e.join(""))}catch(r){}if(1===e.length)return e;var n=e.slice(0,t=t||1),t=e.slice(t);return Array.prototype.concat.call([],r(n),r(t))}(t,n).join("")).match(o);return e}}function t(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+(void 0===e?"undefined":r(e))+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(r){return function(r){for(var e={"%FE%FF":"��","%FF%FE":"��"},t=c.exec(r);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch(r){var n=u(t[0]);n!==t[0]&&(e[t[0]]=n)}t=c.exec(r)}e["%C2"]="�";for(var o=Object.keys(e),a=0;a<o.length;a++){var i=o[a];r=r.replace(new RegExp(i,"g"),e[i])}return r}(e)}}function U(r,e){if("string"!=typeof r||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[r];var t=r.indexOf(e);return-1===t?[r]:[r.slice(0,t),r.slice(t+e.length)]}var k=function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,e){var t=[],n=!0,o=!1,a=void 0;try{for(var i,c=r[Symbol.iterator]();!(n=(i=c.next()).done)&&(t.push(i.value),!e||t.length!==e);n=!0);}catch(r){o=!0,a=r}finally{try{!n&&c.return&&c.return()}finally{if(o)throw a}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};function y(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}var n,a=(function(c){function w(r){if("string"!=typeof r||1!==r.length)throw new TypeError("arrayFormatSeparator must be single character string")}function s(r,e){return e.encode?e.strict?encodeURIComponent(r).replace(/[!'()*]/g,function(r){return"%"+r.charCodeAt(0).toString(16).toUpperCase()}):encodeURIComponent(r):r}function x(r,e){return e.decode?t(r):r}function u(r){var e=r.indexOf("#");return r=-1!==e?r.slice(0,e):r}function o(r){var e=(r=u(r)).indexOf("?");return-1===e?"":r.slice(e+1)}function A(r,e){return e.parseNumbers&&!Number.isNaN(Number(r))&&"string"==typeof r&&""!==r.trim()?r=Number(r):!e.parseBooleans||null===r||"true"!==r.toLowerCase()&&"false"!==r.toLowerCase()||(r="true"===r.toLowerCase()),r}function a(r,e){w((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);var t=function(a){var n=void 0;switch(a.arrayFormat){case"index":return function(r,e,t){n=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),n?(void 0===t[r]&&(t[r]={}),t[r][n[1]]=e):t[r]=e};case"bracket":return function(r,e,t){n=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),n?void 0!==t[r]?t[r]=[].concat(t[r],e):t[r]=[e]:t[r]=e};case"comma":case"separator":return function(r,e,t){var n="string"==typeof e&&e.includes(a.arrayFormatSeparator),o="string"==typeof e&&!n&&x(e,a).includes(a.arrayFormatSeparator);e=o?x(e,a):e;e=n||o?e.split(a.arrayFormatSeparator).map(function(r){return x(r,a)}):null===e?e:x(e,a);t[r]=e};default:return function(r,e,t){void 0!==t[r]?t[r]=[].concat(t[r],e):t[r]=e}}}(e),n=Object.create(null);if("string"!=typeof r)return n;if(!(r=r.trim().replace(/^[?#&]/,"")))return n;var o=!0,a=!1,i=void 0;try{for(var c,u=r.split("&")[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l,f,s=c.value;""!==s&&(l=U(e.decode?s.replace(/\+/g," "):s,"="),v=(f=k(l,2))[0],m=void 0===(m=f[1])?null:["comma","separator"].includes(e.arrayFormat)?m:x(m,e),t(x(v,e),m,n))}}catch(r){a=!0,i=r}finally{try{!o&&u.return&&u.return()}finally{if(a)throw i}}var y=!0,a=!1,i=void 0;try{for(var p,d=Object.keys(n)[Symbol.iterator]();!(y=(p=d.next()).done);y=!0){var m,v=p.value;if("object"===(void 0===(m=n[v])?"undefined":F(m))&&null!==m){var b=!0,g=!1,h=void 0;try{for(var j,S=Object.keys(m)[Symbol.iterator]();!(b=(j=S.next()).done);b=!0){var O=j.value;m[O]=A(m[O],e)}}catch(r){g=!0,h=r}finally{try{!b&&S.return&&S.return()}finally{if(g)throw h}}}else n[v]=A(m,e)}}catch(r){a=!0,i=r}finally{try{!y&&d.return&&d.return()}finally{if(a)throw i}}return!1===e.sort?n:(!0===e.sort?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce(function(r,e){var t=n[e];return Boolean(t)&&"object"===(void 0===t?"undefined":F(t))&&!Array.isArray(t)?r[e]=function r(e){return Array.isArray(e)?e.sort():"object"===(void 0===e?"undefined":F(e))?r(Object.keys(e)).sort(function(r,e){return Number(r)-Number(e)}).map(function(r){return e[r]}):e}(t):r[e]=t,r},Object.create(null))}c.extract=o,c.parse=a,c.stringify=function(t,n){if(!t)return"";w((n=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},n)).arrayFormatSeparator);var r,o=function(o){switch(o.arrayFormat){case"index":return function(n){return function(r,e){var t=r.length;return void 0===e||o.skipNull&&null===e||o.skipEmptyString&&""===e?r:[].concat(y(r),null===e?[[s(n,o),"[",t,"]"].join("")]:[[s(n,o),"[",s(t,o),"]=",s(e,o)].join("")])}};case"bracket":return function(t){return function(r,e){return void 0===e||o.skipNull&&null===e||o.skipEmptyString&&""===e?r:[].concat(y(r),null===e?[[s(t,o),"[]"].join("")]:[[s(t,o),"[]=",s(e,o)].join("")])}};case"comma":case"separator":return function(t){return function(r,e){return null==e||0===e.length?r:0===r.length?[[s(t,o),"=",s(e,o)].join("")]:[[r,s(e,o)].join(o.arrayFormatSeparator)]}};default:return function(t){return function(r,e){return void 0===e||o.skipNull&&null===e||o.skipEmptyString&&""===e?r:[].concat(y(r),null===e?[s(t,o)]:[[s(t,o),"=",s(e,o)].join("")])}}}}(n),e={},a=!0,i=!1,c=void 0;try{for(var u,l=Object.keys(t)[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var f=u.value;r=f,n.skipNull&&null==t[r]||n.skipEmptyString&&""===t[r]||(e[f]=t[f])}}catch(r){i=!0,c=r}finally{try{!a&&l.return&&l.return()}finally{if(i)throw c}}c=Object.keys(e);return!1!==n.sort&&c.sort(n.sort),c.map(function(r){var e=t[r];return void 0===e?"":null===e?s(r,n):Array.isArray(e)?e.reduce(o(r),[]).join("&"):s(r,n)+"="+s(e,n)}).filter(function(r){return 0<r.length}).join("&")},c.parseUrl=function(r,e){e=Object.assign({decode:!0},e);var t=U(r,"#"),n=k(t,2),t=n[0],n=n[1];return Object.assign({url:t.split("?")[0]||"",query:a(o(r),e)},e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:x(n,e)}:{})},c.stringifyUrl=function(r,e){e=Object.assign({encode:!0,strict:!0},e);var t=u(r.url).split("?")[0]||"",n=c.extract(r.url),o=c.parse(n,{sort:!1}),a=Object.assign(o,r.query),i=(i=c.stringify(a,e))&&"?"+i,o=(n=r.url,o="",a=n.indexOf("#"),o=-1!==a?n.slice(a):o);return""+t+i+(o=r.fragmentIdentifier?"#"+s(r.fragmentIdentifier,e):o)},c.pick=function(r,e,t){t=Object.assign({parseFragmentIdentifier:!0},t);var n=c.parseUrl(r,t),o=n.url,r=n.query,n=n.fragmentIdentifier;return c.stringifyUrl({url:o,query:function(r,e){for(var t={},n=Object.keys(r),o=Array.isArray(e),a=0;a<n.length;a++){var i=n[a],c=r[i];(o?-1!==e.indexOf(i):e(i,c,r))&&(t[i]=c)}return t}(r,e),fragmentIdentifier:n},t)},c.exclude=function(r,t,e){var n=Array.isArray(t)?function(r){return!t.includes(r)}:function(r,e){return!t(r,e)};return c.pick(r,n,e)}}((n={exports:{}},n.exports)),n.exports),i=(a.extract,a.parse,a.stringify,a.parseUrl,a.stringifyUrl,a.pick,a.exclude,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r}),h=function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,e){var t=[],n=!0,o=!1,a=void 0;try{for(var i,c=r[Symbol.iterator]();!(n=(i=c.next()).done)&&(t.push(i.value),!e||t.length!==e);n=!0);}catch(r){o=!0,a=r}finally{try{!n&&c.return&&c.return()}finally{if(o)throw a}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=Object.prototype.toString;function j(r){var e;return"[object Object]"===l.call(r)&&(null===(e=Object.getPrototypeOf(r))||e===Object.getPrototypeOf({}))}function S(r,e){return new URL(r,e)}var f={merge:function r(e){var t=Array.prototype.slice.call(arguments,1),n=!0,o=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var u=i.value,l=!0,f=!1,s=void 0;try{for(var y,p=Object.entries(u)[Symbol.iterator]();!(l=(y=p.next()).done);l=!0){var d,m=y.value,v=h(m,2),b=v[0],g=v[1];void 0!==g&&((d=e[b])instanceof URL?e[b]=S(g,d):j(g)?j(d)?e[b]=r({},d,g):e[b]=r({},g):g instanceof Array?e[b]=r([],g):e[b]=g)}}catch(r){f=!0,s=r}finally{try{!l&&p.return&&p.return()}finally{if(f)throw s}}}}catch(r){o=!0,a=r}finally{try{!n&&c.return&&c.return()}finally{if(o)throw a}}return e},isPlainObject:j,toString:l,mergeURL:S,parseJSON:function r(e){return e instanceof Response?e.text().then(r):JSON.parse(e.replace("for (;;);\r\n",""))},httpBuildQuery:function(r){return a.stringify(r,"&","=",{encodeURIComponent:encodeURIComponent})},appendSearchParams:function r(e,t,n){for(var o in t){var a;t.hasOwnProperty(o)&&(a=n?n+"["+o+"]":o,null!==(o=t[o])&&"object"===(void 0===o?"undefined":i(o))?r(e,o,a):e.searchParams.append(a,o))}return e}},s={method:"get",headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8",Pragma:"no-cache","Cache-Control":"no-cache","Upgrade-Insecure-Requests":"1","User-Agent":"Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36"},body:null,credentials:"include",cache:"no-cache",redirect:"follow"};function p(r,e){try{if(r instanceof URL||(r=new URL(r,location.href)),e=e||{},!f.isPlainObject(e))throw new Error("options must be an object");e.qs&&(f.appendSearchParams(r,e.qs),delete e.qs);var t={headers:{}},n=void 0;e.hasOwnProperty("noParseJSON")&&(n=e.noParseJSON,delete e.noParseJSON);var o=!1;return e.hasOwnProperty("json")&&(t.headers.Accept="application/json",e.method&&"get"!==(e.method+"").toLowerCase()&&(e.body||(t.headers["Content-Type"]="application/json",t.body=JSON.stringify(e.json))),delete e.json,o=!0),e.data&&f.isPlainObject(e.data)&&(t.headers["Content-Type"]="application/x-www-form-urlencoded",e.body||(t.body=f.httpBuildQuery(e.data)),delete e.data),e.referer=r.href,e=f.merge({},s,t,e),o&&!n?fetch(r,e).then(f.parseJSON):fetch(r,e)}catch(r){return Promise.reject(r)}}return p.defaults=function(t){var n=void 0;t.url&&(n=t.url,delete t.url,n instanceof URL||(n=new URL(n)));var o=void 0;return t.options&&(o=t.options,delete t.options),function(r,e){return p(r=n?f.mergeURL(r,n):r,e=o&&"function"==typeof o?e?f.merge({},t,o(),e):f.merge({},t,o()):e?f.merge({},t,e):f.merge({},t))}},p});
