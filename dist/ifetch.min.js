!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ifetch=t()}(this,function(){"use strict";var r=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})},e=("function"==typeof Symbol&&Symbol.iterator,"%[a-f0-9]{2}");new RegExp(e,"gi"),new RegExp("("+e+")+","gi");"function"==typeof Symbol&&Symbol.iterator;function p(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}var t=function(l,f){if(!l)return"";var s=function(n){switch(n.arrayFormat){case"index":return function(e,t,r){return null===t?[p(e,n),"[",r,"]"].join(""):[p(e,n),"[",p(r,n),"]=",p(t,n)].join("")};case"bracket":return function(e,t){return null===t?[p(e,n),"[]"].join(""):[p(e,n),"[]=",p(t,n)].join("")};default:return function(e,t){return null===t?p(e,n):[p(e,n),"=",p(t,n)].join("")}}}(f=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},f)),e=Object.keys(l);return!1!==f.sort&&e.sort(f.sort),e.map(function(e){var t=l[e];if(void 0===t)return"";if(null===t)return p(e,f);if(Array.isArray(t)){var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=t.slice()[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var u=i.value;void 0!==u&&r.push(s(e,u,r.length))}}catch(e){o=!0,a=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw a}}return r.join("&")}return p(e,f)+"="+p(t,f)}).filter(function(e){return 0<e.length}).join("&")},c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=Object.prototype.toString;function j(e){var t=void 0;return"[object Object]"===n.call(e)&&(null===(t=Object.getPrototypeOf(e))||t===Object.getPrototypeOf({}))}function S(e,t){return new URL(e,t)}var a={merge:function e(t){var r=Array.prototype.slice.call(arguments,1),n=!0,o=!1,a=void 0;try{for(var i,c=r[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var u=i.value,l=!0,f=!1,s=void 0;try{for(var p,d=Object.entries(u)[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var y=p.value,m=g(y,2),h=m[0],b=m[1];if(void 0!==b){var v=t[h];v instanceof URL?t[h]=S(b,v):j(b)?j(v)?t[h]=e({},v,b):t[h]=e({},b):b instanceof Array?t[h]=e([],b):t[h]=b}}}catch(e){f=!0,s=e}finally{try{!l&&d.return&&d.return()}finally{if(f)throw s}}}}catch(e){o=!0,a=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw a}}return t},isPlainObject:j,toString:n,mergeURL:S,parseJSON:function e(t){return t instanceof Response?t.text().then(e):JSON.parse(t.replace("for (;;);\r\n",""))},httpBuildQuery:function(e){return t(e,"&","=",{encodeURIComponent:encodeURIComponent})},appendSearchParams:function e(t,r,n){for(var o in r)if(r.hasOwnProperty(o)){var a=n?n+"["+o+"]":o,i=r[o];null!==i&&"object"===(void 0===i?"undefined":c(i))?e(t,i,a):t.searchParams.append(a,i)}return t}},i={method:"get",headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8",Pragma:"no-cache","Cache-Control":"no-cache","Upgrade-Insecure-Requests":"1","User-Agent":"Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36"},body:null,credentials:"include",cache:"no-cache",redirect:"follow"};function u(e,t){try{if(e instanceof URL||(e=new URL(e,location.href)),t||(t={}),!a.isPlainObject(t))throw new Error("options must be an object");t.qs&&(a.appendSearchParams(e,t.qs),delete t.qs);var r={headers:{}},n=void 0;t.hasOwnProperty("noParseJSON")&&(n=t.noParseJSON,delete t.noParseJSON);var o=!1;return t.hasOwnProperty("json")&&(r.headers.Accept="application/json","get"!==t.method.toLowerCase()&&(t.body||(r.headers["Content-Type"]="application/json",r.body=JSON.stringify(t.json))),delete t.json,o=!0),t.data&&a.isPlainObject(t.data)&&(r.headers["Content-Type"]="application/x-www-form-urlencoded",t.body||(r.body=a.httpBuildQuery(t.data)),delete t.data),(t=a.merge({},i,r,t)).referer=e.href,o&&!n?fetch(e,t).then(a.parseJSON):fetch(e,t)}catch(e){return Promise.reject(e)}}return u.defaults=function(r){var n=void 0;r.url&&(n=r.url,delete r.url,n instanceof URL||(n=new URL(n)));var o=void 0;return r.options&&(o=r.options,delete r.options),function(e,t){return n&&(e=a.mergeURL(e,n)),u(e,t=o&&"function"==typeof o?t?a.merge({},r,o(),t):a.merge({},r,o()):t?a.merge({},r,t):a.merge({},r))}},u});
